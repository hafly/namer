(function(){"use strict";var n={1425:function(n,e,t){t(8435);var r=t(1453),a=(t(7645),t(9455)),o=(t(1306),t(9665)),i=(t(1042),t(8633)),u=t(9242),l=t(3396);function s(n,e){const t=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(t)}var c=t(89);const f={},h=(0,c.Z)(f,[["render",s]]);var p=h,d=t(2483);const m={class:"poem-container"},g={style:{padding:"20px"}},v=(0,l._)("h3",{style:{"font-weight":"bold"}},"古诗文起名",-1),y={style:{padding:"0 20px"}},w={class:"result-container"},b=["innerHTML"];function k(n,e,t,r,a,o){const i=(0,l.up)("a-radio"),u=(0,l.up)("a-radio-group"),s=(0,l.up)("a-input"),c=(0,l.up)("a-button"),f=(0,l.up)("a-input-group"),h=(0,l.up)("a-spin");return(0,l.wg)(),(0,l.j4)(h,{spinning:a.loading,delay:200},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l._)("div",g,[v,(0,l.Wm)(u,{value:a.poemType,"onUpdate:value":e[0]||(e[0]=n=>a.poemType=n),name:"radioGroup",onChange:o.onChange},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{value:"shijing"},{default:(0,l.w5)((()=>[(0,l.Uk)("诗经")])),_:1}),(0,l.Wm)(i,{value:"chuci"},{default:(0,l.w5)((()=>[(0,l.Uk)("楚辞")])),_:1}),(0,l.Wm)(i,{value:"tangshi"},{default:(0,l.w5)((()=>[(0,l.Uk)("唐诗")])),_:1}),(0,l.Wm)(i,{value:"songci"},{default:(0,l.w5)((()=>[(0,l.Uk)("宋词")])),_:1}),(0,l.Wm)(i,{value:"yuefu"},{default:(0,l.w5)((()=>[(0,l.Uk)("乐府诗集")])),_:1}),(0,l.Wm)(i,{value:"gushi"},{default:(0,l.w5)((()=>[(0,l.Uk)("古诗三百首")])),_:1}),(0,l.Wm)(i,{value:"cifu"},{default:(0,l.w5)((()=>[(0,l.Uk)("著名辞赋")])),_:1})])),_:1},8,["value","onChange"])]),(0,l._)("div",y,[(0,l.Wm)(f,{compact:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{value:a.familyName,"onUpdate:value":e[1]||(e[1]=n=>a.familyName=n),placeholder:"姓氏","enter-button":"",maxlength:2,style:{width:"250px"}},null,8,["value"]),(0,l.Wm)(c,{type:"primary",onClick:o.onSearch},{default:(0,l.w5)((()=>[(0,l.Uk)("起名")])),_:1},8,["onClick"])])),_:1})]),(0,l._)("div",null,[(0,l._)("ul",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.nameList,((n,e)=>((0,l.wg)(),(0,l.iD)("li",{key:e,innerHTML:n,class:"name-box"},null,8,b)))),128))])])])])),_:1},8,["spinning"])}t(1827);var _=t(2725);t(7658);function $(n,e){return n+Math.floor(Math.random()*(e-n+1))}function j(n){const e=$(0,n.length-1);return n[e]}class O{constructor(){this.book=null}formatStr(n){let e=n.replace(/(\s|”|“){1,}|<br>|<p>|<\/p>/g,"");return e=e.replace(/\(.+\)/g,""),e}splitSentence(n){if(!n)return[];let e=this.formatStr(n);e=e.replace(/！|。|？|；/g,(n=>`${n}|`)),e=e.replace(/\|$/g,"");let t=e.split("|");return t=t.filter((n=>n.length>=2)),t}cleanPunctuation(n){const e=/[<>《》！*(^)$%~!@#…&%￥—+=、。，？；‘’“”：·`]/g;return n.replace(e,"")}cleanBadChar(n){const e="胸鬼懒禽鸟鸡我邪罪凶丑仇鼠蟋蟀淫秽妹狐鸡鸭蝇悔鱼肉苦犬吠窥血丧饥女搔父母昏狗蟊疾病痛死潦哀痒害蛇牲妇狸鹅穴畜烂兽靡爪氓劫鬣螽毛婚姻匪婆羞辱尸".split("");return n.split("").filter((n=>-1===e.indexOf(n))).join("")}genName(){if(!this.book)return null;try{const n=j(this.book),{content:e,title:t,author:r,book:a,dynasty:o}=n;if(!e)return null;const i=this.splitSentence(e);if(!(Array.isArray(i)&&i.length>0))return null;const u=j(i),l=this.cleanBadChar(this.cleanPunctuation(u));if(l.length<=2)return null;const s=this.getTwoChar(l.split(""));return{name:s,sentence:u,content:e,title:t,author:r,book:a,dynasty:o}}catch(n){console.error(n)}}getTwoChar(n){const e=n.length,t=$(0,e-1);let r=$(0,e-1),a=0;while(r===t)if(r=$(0,e-1),a++,a>100)break;return t<=r?`${n[t]}${n[r]}`:`${n[r]}${n[t]}`}loadBook(n,e){const t=`./json/${n}.json`;fetch(t,{cache:"force-cache"}).then((n=>n.json())).then((n=>{this.book=n,"function"===typeof e&&e(n)})).catch((n=>{console.error(n)}))}}var C=O,x={name:"poem",data(){return{loading:!0,namer:new C,poemType:"shijing",familyName:"李",nameAmount:10,nameList:[]}},created(){this.namer.loadBook("shijing",(()=>{this.loading=!1}))},methods:{onChange(n){this.loading=!0,this.namer.loadBook(n.target.value,(()=>{this.loading=!1}))},onSearch(){if(this.familyName){this.nameList=[];for(let n=0;n<this.nameAmount;n++){const n=this.namer.genName(),e=this.genNameHtml(n);e&&this.nameList.push(e)}}else _.ZP.warn("请输入姓氏")},genNameHtml(n){if(!n)return null;const{name:e,sentence:t,title:r,author:a,book:o,dynasty:i}=n,u=t.replace(new RegExp(`[${e}]`,"ig"),(n=>`<i>${n}</i>`));return`\n        <h3>${this.familyName}${e}</h3>\n        <p class='sentence'>\n          <span>「</span>\n          ${u}\n          <span>」</span>\n        </p>\n        <div class='source-row' >\n          <div class='book'>《${r}》</div>\n          <div class='author'>[${i}]&nbsp;${a||"佚名"}</div>\n        </div>`}}};const W=(0,c.Z)(x,[["render",k]]);var U=W;const N=[{path:"/",name:"poem",component:U}],T=(0,d.p7)({history:(0,d.PO)("/namer/"),routes:N});var P=T;(0,u.ri)(p).use(P).use(r.Z).use(a.ZP).use(o.ZP).use(i.Z).mount("#app")}},e={};function t(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return n[r](o,o.exports,t),o.exports}t.m=n,function(){var n=[];t.O=function(e,r,a,o){if(!r){var i=1/0;for(c=0;c<n.length;c++){r=n[c][0],a=n[c][1],o=n[c][2];for(var u=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(t.O).every((function(n){return t.O[n](r[l])}))?r.splice(l--,1):(u=!1,o<i&&(i=o));if(u){n.splice(c--,1);var s=a();void 0!==s&&(e=s)}}return e}o=o||0;for(var c=n.length;c>0&&n[c-1][2]>o;c--)n[c]=n[c-1];n[c]=[r,a,o]}}(),function(){t.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(e,{a:e}),e}}(),function(){t.d=function(n,e){for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)}}(),function(){var n={143:0};t.O.j=function(e){return 0===n[e]};var e=function(e,r){var a,o,i=r[0],u=r[1],l=r[2],s=0;if(i.some((function(e){return 0!==n[e]}))){for(a in u)t.o(u,a)&&(t.m[a]=u[a]);if(l)var c=l(t)}for(e&&e(r);s<i.length;s++)o=i[s],t.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return t.O(c)},r=self["webpackChunknamer"]=self["webpackChunknamer"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(1425)}));r=t.O(r)})();